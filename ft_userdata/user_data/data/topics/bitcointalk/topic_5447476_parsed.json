{
  "id": "topic_5447476",
  "title": "xioxian",
  "author": "xioxian",
  "created_time": "April 04, 2023, 12:32:32 AM",
  "content": "Good evening all.So one of my S9s hash rate was dropping every hour or so using BrainsOS. I swapped firmware to Vnish and now to stock firmware as this weirdly fixed the issue once before.Now on the original firmware, I can see that one board is showing \"NaN\"Can anyone helps me to determine if the hashboard is falling before I order a new one?Logs:Detect 512MB control board of XILINXMiner Type = S9Miner compile time: Sat Jan 29 09:25:44 CST 2022 type: Antminer S9 (vnish 3.9.0)set_reset_allhashboard = 0x0000ffffset_reset_allhashboard = 0x00000000set_reset_allhashboard = 0x0000ffffset_reset_allhashboard = 0x0000ffffChecking fans!1 fan ok2 fan okset_reset_allhashboard = 0x0000ffffCheck chain[5] PIC fw version=0x03Check chain[6] PIC fw version=0x03Check chain[7] PIC fw version=0x03Fix freq=700 Chain[5] voltage_pic=108 value=880Fix freq=700 Chain[6] voltage_pic=108 value=880Fix freq=700 Chain[7] voltage_pic=108 value=880set_reset_allhashboard = 0x0000ffffset_reset_allhashboard = 0x00000000Chain[5] has 63 asicChain[6] has 63 asicChain[7] has 0 asicset_reset_hashboard = 0x00000080set_reset_hashboard = 0x00000000retry Chain[7] has 0 asicset_reset_hashboard = 0x00000080set_reset_hashboard = 0x00000000retry Chain[7] has 0 asicset_reset_hashboard = 0x00000080set_reset_hashboard = 0x00000000retry Chain[7] has 0 asicset_reset_hashboard = 0x00000080set_reset_hashboard = 0x00000000retry Chain[7] has 0 asicset_reset_hashboard = 0x00000080set_reset_hashboard = 0x00000000retry Chain[7] has 0 asicset_reset_hashboard = 0x00000080set_reset_hashboard = 0x00000000retry Chain[7] has 0 asicChain[5] has no freq in PIC, set default freq=700MChain[5] has no core num in PICChain[6] has no freq in PIC, set default freq=700MChain[6] has no core num in PICSet CHIP PowerOff Temp=105CMiner fix freq ...read PIC voltage=940 on chain[5]Chain:5 chipnum=63Asic[ 0]:662 Asic[ 1]:662 Asic[ 2]:662 Asic[ 3]:662 Asic[ 4]:662 Asic[ 5]:662 Asic[ 6]:662 Asic[ 7]:662 Asic[ 8]:662 Asic[ 9]:662 Asic[10]:662 Asic[11]:662 Asic[12]:662 Asic[13]:662 Asic[14]:662 Asic[15]:662 Asic[16]:662 Asic[17]:662 Asic[18]:662 Asic[19]:662 Asic[20]:662 Asic[21]:662 Asic[22]:662 Asic[23]:662 Asic[24]:662 Asic[25]:662 Asic[26]:662 Asic[27]:662 Asic[28]:662 Asic[29]:662 Asic[30]:662 Asic[31]:662 Asic[32]:662 Asic[33]:662 Asic[34]:662 Asic[35]:662 Asic[36]:662 Asic[37]:662 Asic[38]:662 Asic[39]:662 Asic[40]:662 Asic[41]:662 Asic[42]:662 Asic[43]:662 Asic[44]:662 Asic[45]:662 Asic[46]:662 Asic[47]:662 Asic[48]:662 Asic[49]:662 Asic[50]:662 Asic[51]:662 Asic[52]:662 Asic[53]:662 Asic[54]:662 Asic[55]:662 Asic[56]:662 Asic[57]:662 Asic[58]:662 Asic[59]:662 Asic[60]:662 Asic[61]:662 Asic[62]:662 Chain:5 max freq=662Chain:5 min freq=662read PIC voltage=940 on chain[6]Chain:6 chipnum=63Asic[ 0]:662 Asic[ 1]:662 Asic[ 2]:662 Asic[ 3]:662 Asic[ 4]:662 Asic[ 5]:662 Asic[ 6]:662 Asic[ 7]:662 Asic[ 8]:662 Asic[ 9]:662 Asic[10]:662 Asic[11]:662 Asic[12]:662 Asic[13]:662 Asic[14]:662 Asic[15]:662 Asic[16]:662 Asic[17]:662 Asic[18]:662 Asic[19]:662 Asic[20]:662 Asic[21]:662 Asic[22]:662 Asic[23]:662 Asic[24]:662 Asic[25]:662 Asic[26]:662 Asic[27]:662 Asic[28]:662 Asic[29]:662 Asic[30]:662 Asic[31]:662 Asic[32]:662 Asic[33]:662 Asic[34]:662 Asic[35]:662 Asic[36]:662 Asic[37]:662 Asic[38]:662 Asic[39]:662 Asic[40]:662 Asic[41]:662 Asic[42]:662 Asic[43]:662 Asic[44]:662 Asic[45]:662 Asic[46]:662 Asic[47]:662 Asic[48]:662 Asic[49]:662 Asic[50]:662 Asic[51]:662 Asic[52]:662 Asic[53]:662 Asic[54]:662 Asic[55]:662 Asic[56]:662 Asic[57]:662 Asic[58]:662 Asic[59]:662 Asic[60]:662 Asic[61]:662 Asic[62]:662 Chain:6 max freq=662Chain:6 min freq=662max freq = 662set baud=1chain[6] temp chip I2C addr=0x98 ID=0x55Chain[5] set working voltage=880 [108]Chain[6] set working voltage=880 [108]setStartTimePoint total_tv_start_sys=101 total_tv_end_sys=102restartNum = 2 , auto-reinit enabled...do read_temp_func once...do check_asic_reg 0x08get RT hashrate from Chain[5]: (asic index start from 1-63)get RT hashrate from Chain[6]: (asic index start from 1-63)Check Chain[5] ASIC RT error: (asic index start from 1-63)Check Chain[6] ASIC RT error: (asic index start from 1-63)Done check_asic_regdo read temp on Chain[5]Chain[5] Chip[62] TempTypeID=55 middle offset=27Chain[5] Chip[62] local Temp=0Chain[5] Chip[62] middle Temp=0Done read temp on Chain[5]do read temp on Chain[6]Chain[6] Chip[62] TempTypeID=55 middle offset=27Chain[6] Chip[62] local Temp=0Chain[6] Chip[62] middle Temp=0Done read temp on Chain[6]set FAN speed according to: temp_highest=0 temp_top1[PWM_T]=0 temp_top1[TEMP_POS_LOCAL]=0 temp_change=0 fix_fan_steps=0FAN PWM: 100read_temp_func Done!CRC error counter=0Thanks in advanced guys.",
  "score": 0,
  "upvotes": 0,
  "downvotes": 0,
  "url": "https://bitcointalk.org/index.php?topic=5447476",
  "comments": [
    {
      "author": "ZeusBtc.com",
      "created_time": "April 04, 2023, 02:07:38 AM",
      "body": "Code:Chain[5] has 63 asicChain[6] has 63 asicChain[7] has 0 asicThe hashboard connected to Chain[7] finds 0 asic, you can try to replace the data cable on the hash board side to rule out the cause of the data cable and the control board. Then check the voltage and RI signal.You can check this guide:https://www.zeusbtc.com/articles/asic-miner-troubleshooting/3172-antminer-s9-chain-j8-has-0-asic-s9-kernel-log",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "BitMaxz",
      "created_time": "April 04, 2023, 03:13:57 PM",
      "body": "The 3rd hashboard should be the Chain[7] if you don't have a replacement cable as suggested above I suggest swap them to Chain[5] or [6] to test if the 3rd hashboard is working fine but if not then the 3rd hashboard is broken you can replace it with new one but if you don't have a budget and want to repair it with your own check the hashboard physically for burnt parts and shorted using a multimeter.You can also read this zeusbtc s9 repair full guide to find the test points here",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "mikeywith",
      "created_time": "April 10, 2023, 02:30:30 AM",
      "body": "I would like to add another important point to go on top of what ZuesBTC mentioned, you should swap everything between J7 and J5/J6, not just the ribbon cable, swap the 6 pin power cable as well, and then fire the miner up, there is also no need to check the voltage or anything like that to arrive to the conclusion you need, just look at the kernel log, find the following partCode:Chain[5] has 63 asicChain[6] has 63 asicChain[7] has 0 asicLet's say you swapped 7<>6, if the board is good and the issue is either the data cable or power cable, the kernel log will be the sameCode:Chain[5] has 63 asicChain[6] has 63 asicChain[7] has 0 asicThis means even the old J6 which is now J7 isn't working in that slot, so you know the previous J7 which is now J6 was good all along, and it's either the PSU or the data cable that needs replacing.if however, the kernel long changes toCode:Chain[5] has 63 asicChain[6] has 0 asicChain[7] has 65 asicYou would apply the same logic above (inversed) and reach the conclusion that you the hashboard is physically dead and needs further diagnosis, and repair.While performing the test, it's best to unplug J5's 6-pin power cables.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    }
  ]
}