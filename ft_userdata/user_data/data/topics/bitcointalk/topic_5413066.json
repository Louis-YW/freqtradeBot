{
  "id": "topic_5413066",
  "title": "Menealo",
  "author": "Menealo",
  "created_time": "September 10, 2022, 12:02:40 PM",
  "content": "Good morning everyone.I can't fully synchronize the blockchain on my node and I get in the debug.log the following error.2022-09-07T17:30:07Z Bitcoin Core version v23.0.0 (release build)2022-09-07T17:30:07Z InitParameterInteraction: parameter interaction: -proxy set -> setting -upnp=02022-09-07T17:30:07Z InitParameterInteraction: parameter interaction: -proxy set -> setting -natpmp=02022-09-07T17:30:07Z InitParameterInteraction: parameter interaction: -proxy set -> setting -discover=02022-09-07T17:30:07Z InitParameterInteraction: parameter interaction: -blocksonly=1 -> setting -whitelistrelay=02022-09-07T17:30:07Z Assuming ancestors of block 000000000000000000052d314a259755ca65944e68df6b12a067ea8f1f5a7091 have valid signatures.2022-09-07T17:30:07Z Setting nMinimumChainWork=00000000000000000000000000000000000000002927cdceccbd5209e81e80db2022-09-07T17:30:07Z ParameterInteraction: parameter interaction: -blocksonly=1 -> setting -walletbroadcast=02022-09-07T17:30:07Z Using the 'standard' SHA256 implementation2022-09-07T17:30:07Z Default data directory /home/bitcoin/.bitcoin2022-09-07T17:30:07Z Using data directory /home/bitcoin/.bitcoin2022-09-07T17:30:07Z Config file: /home/bitcoin/.bitcoin/bitcoin.conf2022-09-07T17:30:07Z Config file arg: bind=\"127.0.0.1\"2022-09-07T17:30:07Z Config file arg: blocksonly=\"1\"2022-09-07T17:30:07Z Config file arg: dbcache=\"2000\"2022-09-07T17:30:07Z Config file arg: listen=\"1\"2022-09-07T17:30:07Z Config file arg: listenonion=\"1\"2022-09-07T17:30:07Z Config file arg: maxconnections=\"40\"2022-09-07T17:30:07Z Config file arg: maxuploadtarget=\"5000\"2022-09-07T17:30:07Z Config file arg: proxy=\"127.0.0.1:9050\"2022-09-07T17:30:07Z Config file arg: rpcauth=****2022-09-07T17:30:07Z Config file arg: server=\"1\"2022-09-07T17:30:07Z Config file arg: txindex=\"1\"2022-09-07T17:30:07Z Config file arg: whitelist=\"download@127.0.0.1\"2022-09-07T17:30:07Z Config file arg: zmqpubrawblock=\"tcp://127.0.0.1:28332\"2022-09-07T17:30:07Z Config file arg: zmqpubrawtx=\"tcp://127.0.0.1:28333\"2022-09-07T17:30:07Z Command-line arg: conf=\"/home/bitcoin/.bitcoin/bitcoin.conf\"2022-09-07T17:30:07Z Command-line arg: daemon=\"\"2022-09-07T17:30:07Z Command-line arg: datadir=\"/home/bitcoin/.bitcoin\"2022-09-07T17:30:07Z Command-line arg: pid=\"/run/bitcoind/bitcoind.pid\"2022-09-07T17:30:07Z Command-line arg: startupnotify=\"chmod g+r /home/bitcoin/.bitcoin/.cookie\"2022-09-07T17:30:07Z Using at most 40 automatic connections (1024 file descriptors available)2022-09-07T17:30:07Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements2022-09-07T17:30:07Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements2022-09-07T17:30:07Z Script verification uses 3 additional threads2022-09-07T17:30:07Z scheduler thread start2022-09-07T17:30:07Z HTTP: creating work queue of depth 162022-09-07T17:30:07Z Using random cookie authentication.2022-09-07T17:30:07Z Generated RPC authentication cookie /home/bitcoin/.bitcoin/.cookie2022-09-07T17:30:07Z Using rpcauth authentication.2022-09-07T17:30:07Z HTTP: starting 4 worker threads2022-09-07T17:30:07Z Using wallet directory /home/bitcoin/.bitcoin2022-09-07T17:30:07Z init message: Verifying wallet(s)…2022-09-07T17:30:07Z Using /16 prefix for IP bucketing2022-09-07T17:30:07Z init message: Loading P2P addresses…2022-09-07T17:30:09Z Error: Invalid or corrupt peers.dat (Checksum mismatch, data corrupted). If you believe this is a bug, please report it to https://github.com/bitcoin/bitcoin/issues. As a workaround, you can move the file (\"/home/bitcoin/.bitcoin/peers.dat\") out of the way (rename, move, or delete) to have a new one created on the next start.2022-09-07T17:30:09Z Shutdown: In progress...2022-09-07T17:30:09Z scheduler thread exit2022-09-07T17:30:09Z Shutdown: doneWhen this error appears, I delete the peers.dat file, restart the bitcoind.service service and this message starts to appear in the debug.log file.2022-09-10T11:43:12Z Bitcoin Core version v23.0.0 (release build)2022-09-10T11:43:12Z InitParameterInteraction: parameter interaction: -proxy set -> setting -upnp=02022-09-10T11:43:12Z InitParameterInteraction: parameter interaction: -proxy set -> setting -natpmp=02022-09-10T11:43:12Z InitParameterInteraction: parameter interaction: -proxy set -> setting -discover=02022-09-10T11:43:12Z InitParameterInteraction: parameter interaction: -blocksonly=1 -> setting -whitelistrelay=02022-09-10T11:43:12Z Assuming ancestors of block 000000000000000000052d314a259755ca65944e68df6b12a067ea8f1f5a7091 have valid signatures.2022-09-10T11:43:12Z Setting nMinimumChainWork=00000000000000000000000000000000000000002927cdceccbd5209e81e80db2022-09-10T11:43:12Z ParameterInteraction: parameter interaction: -blocksonly=1 -> setting -walletbroadcast=02022-09-10T11:43:12Z Using the 'standard' SHA256 implementation2022-09-10T11:43:12Z Default data directory /home/bitcoin/.bitcoin2022-09-10T11:43:12Z Using data directory /home/bitcoin/.bitcoin2022-09-10T11:43:12Z Config file: /home/bitcoin/.bitcoin/bitcoin.conf2022-09-10T11:43:12Z Config file arg: bind=\"127.0.0.1\"2022-09-10T11:43:12Z Config file arg: blocksonly=\"1\"2022-09-10T11:43:12Z Config file arg: dbcache=\"2000\"2022-09-10T11:43:12Z Config file arg: listen=\"1\"2022-09-10T11:43:12Z Config file arg: listenonion=\"1\"2022-09-10T11:43:12Z Config file arg: maxconnections=\"40\"2022-09-10T11:43:12Z Config file arg: maxuploadtarget=\"5000\"2022-09-10T11:43:12Z Config file arg: proxy=\"127.0.0.1:9050\"2022-09-10T11:43:12Z Config file arg: rpcauth=****2022-09-10T11:43:12Z Config file arg: server=\"1\"2022-09-10T11:43:12Z Config file arg: txindex=\"1\"2022-09-10T11:43:12Z Config file arg: whitelist=\"download@127.0.0.1\"2022-09-10T11:43:12Z Config file arg: zmqpubrawblock=\"tcp://127.0.0.1:28332\"2022-09-10T11:43:12Z Config file arg: zmqpubrawtx=\"tcp://127.0.0.1:28333\"2022-09-10T11:43:12Z Command-line arg: conf=\"/home/bitcoin/.bitcoin/bitcoin.conf\"2022-09-10T11:43:12Z Command-line arg: daemon=\"\"2022-09-10T11:43:12Z Command-line arg: datadir=\"/home/bitcoin/.bitcoin\"2022-09-10T11:43:12Z Command-line arg: pid=\"/run/bitcoind/bitcoind.pid\"2022-09-10T11:43:12Z Command-line arg: startupnotify=\"chmod g+r /home/bitcoin/.bitcoin/.cookie\"2022-09-10T11:43:12Z Using at most 40 automatic connections (1024 file descriptors available)2022-09-10T11:43:12Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements2022-09-10T11:43:12Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements2022-09-10T11:43:12Z Script verification uses 3 additional threads2022-09-10T11:43:12Z scheduler thread start2022-09-10T11:43:12Z HTTP: creating work queue of depth 162022-09-10T11:43:12Z Using random cookie authentication.2022-09-10T11:43:12Z Generated RPC authentication cookie /home/bitcoin/.bitcoin/.cookie2022-09-10T11:43:12Z Using rpcauth authentication.2022-09-10T11:43:12Z HTTP: starting 4 worker threads2022-09-10T11:43:12Z Using wallet directory /home/bitcoin/.bitcoin2022-09-10T11:43:12Z init message: Verifying wallet(s)…2022-09-10T11:43:12Z Using /16 prefix for IP bucketing2022-09-10T11:43:12Z init message: Loading P2P addresses…2022-09-10T11:43:12Z Creating peers.dat because the file was not found (\"/home/bitcoin/.bitcoin/peers.dat\")2022-09-10T11:43:12Z init message: Loading banlist…2022-09-10T11:43:12Z SetNetworkActive: true2022-09-10T11:43:12Z Cache configuration:2022-09-10T11:43:12Z * Using 2.0 MiB for block index database2022-09-10T11:43:12Z * Using 249.8 MiB for transaction index database2022-09-10T11:43:12Z * Using 8.0 MiB for chain state database2022-09-10T11:43:12Z * Using 1740.2 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)2022-09-10T11:43:12Z init message: Loading block index…2022-09-10T11:43:12Z Switching active chainstate to Chainstate [ibd] @ height -1 (null)2022-09-10T11:43:12Z Opening LevelDB in /home/bitcoin/.bitcoin/blocks/index2022-09-10T11:43:12Z Opened LevelDB successfully2022-09-10T11:43:12Z Using obfuscation key for /home/bitcoin/.bitcoin/blocks/index: 00000000000000002022-09-10T11:43:41Z LoadBlockIndexDB: last block file = 3292022-09-10T11:43:41Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=204, size=104689982, heights=372620...373180, time=2015-09-02...2015-09-05)2022-09-10T11:43:41Z Checking all blk files are present...2022-09-10T11:43:42Z Opening LevelDB in /home/bitcoin/.bitcoin/chainstate2022-09-10T11:43:42Z Opened LevelDB successfully2022-09-10T11:43:42Z Using obfuscation key for /home/bitcoin/.bitcoin/chainstate: 68770c006eb4929f2022-09-10T11:43:42Z Loaded best chain: hashBestChain=000000000000000011b124bf6af22374cbbaa36d1ad8e940225c009dd21535f3 height=368620 date=2015-08-06T07:33:48Z progress=0.1035892022-09-10T11:43:42Z init message: Verifying blocks…2022-09-10T11:43:42Z Verifying last 6 blocks at level 32022-09-10T11:43:42Z [0%]...[16%]...[33%]...[50%]...[66%]...[83%]...[99%]...[DONE].2022-09-10T11:45:00Z No coin database inconsistencies in last 6 blocks (4708 transactions)2022-09-10T11:45:00Z  block index          107878ms2022-09-10T11:45:00Z Opening LevelDB in /home/bitcoin/.bitcoin/indexes/txindex2022-09-10T11:45:12Z Opened LevelDB successfully2022-09-10T11:45:12Z Using obfuscation key for /home/bitcoin/.bitcoin/indexes/txindex: 00000000000000002022-09-10T11:45:12Z block tree size = 7501142022-09-10T11:45:12Z nBestHeight = 3686202022-09-10T11:45:12Z loadblk thread start2022-09-10T11:45:12Z txindex thread start2022-09-10T11:45:12Z txindex is enabled at height 3686202022-09-10T11:45:12Z txindex thread exit2022-09-10T11:45:12Z torcontrol thread start2022-09-10T11:45:12Z Bound to 127.0.0.1:83332022-09-10T11:45:12Z Bound to 127.0.0.1:83342022-09-10T11:45:13Z 0 block-relay-only anchors will be tried for connections.2022-09-10T11:45:13Z init message: Starting network threads…2022-09-10T11:45:13Z net thread start2022-09-10T11:45:13Z addcon thread start2022-09-10T11:45:13Z dnsseed thread start2022-09-10T11:45:13Z Loading addresses from DNS seed seed.btc.petertodd.org.2022-09-10T11:45:13Z Loading addresses from DNS seed dnsseed.bitcoin.dashjr.org.2022-09-10T11:45:13Z Loading addresses from DNS seed seed.bitcoin.sprovoost.nl.2022-09-10T11:45:13Z Loading addresses from DNS seed seed.bitcoin.sipa.be.2022-09-10T11:45:13Z Loading addresses from DNS seed seed.bitcoin.wiz.biz.2022-09-10T11:45:13Z Loading addresses from DNS seed seed.bitcoinstats.com.2022-09-10T11:45:13Z Loading addresses from DNS seed seed.bitcoin.jonasschnelli.ch.2022-09-10T11:45:13Z Loading addresses from DNS seed dnsseed.bluematt.me.2022-09-10T11:45:13Z Loading addresses from DNS seed dnsseed.emzy.de.2022-09-10T11:45:13Z 0 addresses found from DNS seeds2022-09-10T11:45:13Z dnsseed thread exit2022-09-10T11:45:13Z msghand thread start2022-09-10T11:45:13Z opencon thread start2022-09-10T11:45:13Z tor: Got service ID ybrhmumrpt3prnip6exvg24ws4l5n2fy7ub4qammuwvxthctvrrwn6yd, advertising service ybrhmumrpt3prnip6exvg24ws4l5n2fy7ub4qammuwvxthctvrrwn6yd.onion:83332022-09-10T11:45:13Z AddLocal(ybrhmumrpt3prnip6exvg24ws4l5n2fy7ub4qammuwvxthctvrrwn6yd.onion:8333,4)2022-09-10T11:45:22Z UpdateTip: new best=000000000000000009c40ae736488b6928d5aa31e7d541904190412583048ccb height=368621 version=0x00000003 log2_work=83.174915 tx=78982795 date='2015-08-06T07:43:26Z' progress=0.103590 cache=2.2MiB(16735txo)2022-09-10T11:45:34Z UpdateTip: new best=000000000000000013ab2c23045a607f67e831da297714ef4acb237e2aad33bc height=368622 version=0x00000003 log2_work=83.174945 tx=78983191 date='2015-08-06T07:50:10Z' progress=0.103591 cache=2.4MiB(18680txo)2022-09-10T11:45:34Z init message: Done loading2022-09-10T11:46:37Z UpdateTip: new best=000000000000000000bb7321d6626815350020aa2a11e52e37a357de57764c36 height=368623 version=0x00000003 log2_work=83.174975 tx=78984279 date='2015-08-06T08:07:57Z' progress=0.103592 cache=3.5MiB(26115txo)2022-09-10T11:46:57Z UpdateTip: new best=00000000000000001501758eccae6ff22e8d295bf5dae9a006d82d83a3b2d050 height=368624 version=0x00000003 log2_work=83.175004 tx=78984683 date='2015-08-06T08:17:52Z' progress=0.103593 cache=5.0MiB(38241txo)2022-09-10T11:47:29Z UpdateTip: new best=000000000000000005e4d3bab0205c8fb462b40f8dcb45e90690c49101f2ad5a height=368625 version=0x00000003 log2_work=83.175034 tx=78985819 date='2015-08-06T08:31:06Z' progress=0.103594 cache=6.6MiB(48961txo)2022-09-10T11:48:33Z UpdateTip: new best=00000000000000000c88be8b4ea5f4c83b7accf90673d4e8139ddeaaae0a5f92 height=368626 version=0x00000003 log2_work=83.175064 tx=78986342 date='2015-08-06T08:37:12Z' progress=0.103595 cache=7.4MiB(55697txo)2022-09-10T11:48:34Z Adding fixed seeds as 60 seconds have passed and addrman is empty2022-09-10T11:48:45Z UpdateTip: new best=00000000000000000e2bd714c2c91ccb2fd459b53c86e17fb3d2cdc04e57bd3d height=368627 version=0x00000003 log2_work=83.175093 tx=78986752 date='2015-08-06T08:44:50Z' progress=0.103595 cache=9.2MiB(69707txo)2022-09-10T11:49:14Z UpdateTip: new best=000000000000000009e765dcd3c45f3e43e1025f8a556de0c51305b716311120 height=368628 version=0x00000003 log2_work=83.175123 tx=78987237 date='2015-08-06T08:42:52Z' progress=0.103596 cache=9.7MiB(74237txo)The next day the \"peers.dat\" file error reappears.And always the same.Any idea to solve the error?I'm mounting it on a raspberry 3 model B. The hard drive is not very fast in read/write.",
  "score": 0,
  "upvotes": 0,
  "downvotes": 0,
  "url": "https://bitcointalk.org/index.php?topic=5413066",
  "comments": [
    {
      "author": "DaveF",
      "created_time": "September 10, 2022, 12:59:24 PM",
      "body": "Is it a 2.5\" drive powered off the USB port of the RPi or is it a 3.5\" using external power.The IBD (initial block download) of BTC will stress the CPU and memory of the RPi and the I/O of a drive.Could be a physical issue with the drive, the wall power adapter being marginal and not giving enough power to the drive.With all that being said, it's odd that it's just the peers.dat file. But, it could just be the 1st error coming up before the next one starts.Also, a RPi3 is WAY under powered at this point. Yes you can get it to work, but with the lack of speed and lack of RAM it's going to give you a lot of grief.You can probably put together something for under $100 that will do a better job and $50 if you REALLY look:https://bitcointalk.org/index.php?topic=5364742-Dave",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "nc50lc",
      "created_time": "September 10, 2022, 02:03:02 PM",
      "body": "Quote from: Menealo on September 10, 2022, 12:02:40 PMThe next day the \"peers.dat\" file error reappears.And always the same.Any idea to solve the error?It can also be an issue with your Bitcoin Core's \"address manager\".Try to add addrman to the debug log by starting Bitcoin Core with -debug=addrman command line argument.And see if it outputs a related error.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "NotATether",
      "created_time": "September 10, 2022, 04:21:16 PM",
      "body": "Are you able to reproduce this on a different hard disk but with the same Bitcoin Core version & build? This is so that software bugs can be ruled out as a possible cause.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "n0nce",
      "created_time": "September 11, 2022, 12:25:38 AM",
      "body": "Quote from: ETFbitcoin on September 10, 2022, 12:14:43 PMQuote from: Menealo on September 10, 2022, 12:02:40 PMI'm mounting it on a raspberry 3 model B. The hard drive is not very fast in read/write.Slow HDD shouldn't cause any file corruption.HDD + Raspberry Pi = failure.Slow speed may even be caused due to the drive 'rebooting' itself constantly (it's possible to hear when it stops spinning and starts again, in a regular pattern).In my experience, with different HDDs and different Pis, over multiple years, I tried a handful of times and always got disk corruptions.In some configurations, the disk would barely connect and sometimes shut down before I could even finish the Bitcoin Core install.The truth is that all Raspberry Pis have limited power output on the USB ports and are not suited to power an HDD.Either you will need an externally powered HDD or an SSD. Or a computer with more than 0.9A power output per port.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "DaveF",
      "created_time": "September 11, 2022, 11:44:17 AM",
      "body": "Which is why I made this topic: https://bitcointalk.org/index.php?topic=5399730I really wish the developers would start putting in \"real\" hardware requirements for core.I see more and more pieces of software that can run on sub standard hardware just throw up an error that says 'Too old and slow, sorry'Some people see it as forcing upgrades, others see it as saving the people running it a lot of time and grief.-Dave",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "n0nce",
      "created_time": "September 11, 2022, 11:51:41 AM",
      "body": "Quote from: ETFbitcoin on September 11, 2022, 11:45:10 AMQuote from: n0nce on September 11, 2022, 12:25:38 AMQuote from: ETFbitcoin on September 10, 2022, 12:14:43 PMSlow HDD shouldn't cause any file corruption.HDD + Raspberry Pi = failure.--snip--Yes, i'm aware of USB power problem on Raspberry Pi. But since only peers.dat corrupted (rather than different file corrupted over time), i have doubt the problem lies with Raspberry Pi USB power.Most likely, more parts of the drive are corrupted, just that peers.dat is one of the earlier files Bitcoin Core checks for integrity.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "DaveF",
      "created_time": "September 11, 2022, 08:14:21 PM",
      "body": "We all forgot to ask the other question, Menealo are you running any other things on the RPi or just core?Eliminating the fact that it's under-powered and everything else could there be any other software grabbing the drive / IO something else causing the problem.Still going to point to the device & power & drive but want to eliminate the fact that something else might be causing it.-Dave",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "Menealo",
      "created_time": "September 17, 2022, 10:56:42 AM",
      "body": "Thanks for your help.When I close bitcoin core it closes properly and yes I am just running bitcoin core on the pi.Seeing that all the answers are geared towards power issues, I'll try a new install on an old laptop and do my first steps with bitcoin core.And I will wait for a good offer to buy another type of hardware with more power where I can leave the final installation.In this installation I seek to know how bitcoin works and perhaps also lightning.Thanks.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "nc50lc",
      "created_time": "September 17, 2022, 12:48:59 PM",
      "body": "Quote from: Menealo on September 17, 2022, 10:56:42 AMSeeing that all the answers are geared towards power issues, I'll try a new install on an old laptop and do my first steps with bitcoin core.If you still want to use the Pi, at least try to redownload/clone then recompile/reinstall Bitcoin Core to rule-out (slight) corruption issue since such specific file error can be caused by faulty code.But of course, moving to the laptop is a good choice.Also, 2000MiB of database cache is too much for an RPi3 model B which might have caused additional strain to your HDD though 'swap files'.In your next setup, set it in consideration of your free RAM and OS; do not use 100% of your RAM.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "EpicGhoost",
      "created_time": "October 19, 2022, 12:41:37 PM",
      "body": "Hello,I had the same error and I'm also using a raspbery pi 3b+ and a HDD. Deleting the file worked for me.Also, I recommend that you initialize the bitcoin blockchain on a more powerful computer, get 100% on your HDD, and then plug the HDD back into your raspberry pi.And for cache, raspberry pi 3b+ cannot support the default dbcache present in bitcoincore. I recommend that you put the value dbcache=50 in your bitcoin.conf file.Regards,Ghoost",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "ABCbits",
      "created_time": "October 20, 2022, 09:45:59 AM",
      "body": "Quote from: EpicGhoost on October 19, 2022, 12:41:37 PMAnd for cache, raspberry pi 3b+ cannot support the default dbcache present in bitcoincore. I recommend that you put the value dbcache=50 in your bitcoin.conf file.Yeah, the default value of dbcache rather big (450MB for newer Bitcoin Core). But FYI, Bitcoin Core has nice article about reducing memory usage at https://github.com/bitcoin/bitcoin/blob/master/doc/reduce-memory.md. There are many options, but tweaking maxmempool and dbcache should be enough.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    }
  ]
}