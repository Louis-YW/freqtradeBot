{
  "id": "topic_5462900",
  "title": "GrLinkey",
  "author": "GrLinkey",
  "created_time": "August 11, 2023, 10:03:50 AM",
  "content": "У меня Bitcoin Core 22.0.0 подгружал блокчейн и тут отключился свет. Чем это опасно? Зачем сделана задержка при закрытии программы?",
  "score": 0,
  "upvotes": 0,
  "downvotes": 0,
  "url": "https://bitcointalk.org/index.php?topic=5462900",
  "comments": [
    {
      "author": "A-Bolt",
      "created_time": "August 11, 2023, 10:20:21 AM",
      "body": "Quote from: GrLinkey on August 11, 2023, 10:03:50 AMУ меня Bitcoin Core 22.0.0 подгружал блокчейн и тут отключился свет. Чем это опасно? Обычно ничем не опасно. При следующем запуске Bitcoin Core будет дольше синхронизироваться по сравнению с корректным выключением. В худшем случае может быть повреждена база данных блоков, об этом появится сообщение при запуске. В этом случае необходимо удалить файлы этой базы и синхронизироваться с нуля. Quote from: GrLinkey on August 11, 2023, 10:03:50 AMЗачем сделана задержка при закрытии программы?При выключении все данные из оперативной памяти сохраняются на диск. Этот процесс занимает некоторое время, его лучше не прерывать.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "witcher_sense",
      "created_time": "August 11, 2023, 07:25:04 PM",
      "body": "Quote from: GrLinkey on August 11, 2023, 10:03:50 AMУ меня Bitcoin Core 22.0.0 подгружал блокчейн и тут отключился свет. Чем это опасно? Зачем сделана задержка при закрытии программы?Средства вы не потеряете, так как они находятся \"внутри\" блокчейна, а не внутри программы под названием \"Bitcoin Core\". Но это не отменяет того факта, что нужно делать бэкппы важных файлов, например файлов кошелька, паролей, сид-фраз и так далее. Отключение света, короткое замыкание, удар молнии могут повредить устройство или нарушить целостность данных, поэтому бэкапы нужно хранить отдельно и по возможности на долговечных и надежных физических носителях. Если же Bitcoin Core используется только как софт для запуска полной ноды, то здесь особо беспокоится не нужно, набор стандартных манипуляций поможет исправить последствия некорректной остановки программы и затеи можно продолжать крутить ноду в обычном режиме.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "satscraper",
      "created_time": "August 28, 2023, 03:35:46 AM",
      "body": "Quote from: witcher_sense on August 11, 2023, 07:25:04 PM Если же Bitcoin Core используется только как софт для запуска полной ноды, то здесь особо беспокоится не нужно, набор стандартных манипуляций поможет исправить последствия некорректной остановки программы и затеи можно продолжать крутить ноду в обычном режиме.У меня как раз Bitcoin Core так и используется.Можно поподробнее об этом наборе стандартных манипуляций, а то мне известна только реиндексация. которая к сожалению в большей части случаев не помогает  и приходится синхронизироваться с нуля. В итоге плюнул на это дело и купил ещё один SSD для бэкапа всей базы. Цены на терабайтные SSD сейчас значительно снизились, поэтому посчитал, что лучше потратить полсотни Евро, чем ждать 30 часов до полной синхронизации в случае сбоя базы на  основном диске.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "witcher_sense",
      "created_time": "August 28, 2023, 05:52:46 AM",
      "body": "Quote from: satscraper on August 28, 2023, 03:35:46 AMУ меня как раз Bitcoin Core так и используется.Можно поподробнее об этом наборе стандартных манипуляций, а то мне известна только реиндексация. которая к сожалению в большей части случаев не помогает  и приходится синхронизироваться с нуля. В итоге плюнул на это дело и купил ещё один SSD для бэкапа всей базы. Цены на терабайтные SSD сейчас значительно снизились, поэтому посчитал, что лучше потратить полсотни Евро, чем ждать 30 часов до полной синхронизации в случае сбоя базы на  основном диске. Для подобных программ слово \"стандартная\" подразумевает под собой очень широкое понятие и будет зависеть от многих факторов, например версии Bitcoin Core, используемой ОС, вид носителя данных, хранятся ли файлы блокчейна на отдельном диске и так далее. То есть, решение может быть конкретным для конкретного сетапа, но в основном действия будут более-менее похожими. Реиндекс - это первое, что приходит на ум, когда возникают проблемы с синхонизацией, но в действительности она не всегда помогает. Вторым способом может служить полное удаление папок blocks и chainstate, но предполагает полную ресинхронизацию и не всем подойдет. Третьим решением будет научиться читать логи для идентификации конкретной проблемы. Зачастую в логах включают информацию о способах решения возникших ошибок, возможно будет достаточно ввести определенную команду или удалить часть файлов для успешной реиндексации. Но большинство пользователей даже не знает о существовании логов или не знают как в них ориентироваться, поэтому \"удаление и перестановка\" остается оптимальным вариантом. Тем более для пользователей Windows это совершенно нормально, там ОС только так и чинится.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "satscraper",
      "created_time": "August 28, 2023, 07:46:59 AM",
      "body": "Quote from: witcher_sense on August 28, 2023, 05:52:46 AMQuote from: satscraper on August 28, 2023, 03:35:46 AMУ меня как раз Bitcoin Core так и используется.Можно поподробнее об этом наборе стандартных манипуляций, а то мне известна только реиндексация. которая к сожалению в большей части случаев не помогает  и приходится синхронизироваться с нуля. В итоге плюнул на это дело и купил ещё один SSD для бэкапа всей базы. Цены на терабайтные SSD сейчас значительно снизились, поэтому посчитал, что лучше потратить полсотни Евро, чем ждать 30 часов до полной синхронизации в случае сбоя базы на  основном диске. Для подобных программ слово \"стандартная\" подразумевает под собой очень широкое понятие и будет зависеть от многих факторов, например версии Bitcoin Core, используемой ОС, вид носителя данных, хранятся ли файлы блокчейна на отдельном диске и так далее. То есть, решение может быть конкретным для конкретного сетапа, но в основном действия будут более-менее похожими. Реиндекс - это первое, что приходит на ум, когда возникают проблемы с синхонизацией, но в действительности она не всегда помогает. Вторым способом может служить полное удаление папок blocks и chainstate, но предполагает полную ресинхронизацию и не всем подойдет. Третьим решением будет научиться читать логи для идентификации конкретной проблемы. Зачастую в логах включают информацию о способах решения возникших ошибок, возможно будет достаточно ввести определенную команду или удалить часть файлов для успешной реиндексации. Но большинство пользователей даже не знает о существовании логов или не знают как в них ориентироваться, поэтому \"удаление и перестановка\" остается оптимальным вариантом. Тем более для пользователей Windows это совершенно нормально, там ОС только так и чинится.Операционка и вся остальная муть (типа дисков и способов хранения)  здесь с какого боку?Из контекста всех сообщений в этой теме ясно, что речь идёт только о Bitcoin Core и все остальные программы работают, что подразумевает функционирующую операционную систему и диски.Вы  ответили в предыдущем своём сообщении, что якобы знаете некий набор стандартных манипуляций, который позволяет востановить файлы LevelDB,  запорченные в результате неправильной остановки Bitcoin Core из-за сбоя электричества.Вот я и спросил об этих чудодейственных манипуляциях.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "witcher_sense",
      "created_time": "August 28, 2023, 12:37:27 PM",
      "body": "Quote from: satscraper on August 28, 2023, 07:46:59 AMОперационка и вся остальная муть (типа дисков и способов хранения)  здесь с какого боку?Из контекста всех сообщений в этой теме ясно, что речь идёт только о Bitcoin Core и все остальные программы работают, что подразумевает функционирующую операционную систему и диски.Вы  ответили в предыдущем своём сообщении, что якобы знаете некий набор стандартных манипуляций, который позволяет востановить файлы LevelDB,  запорченные в результате неправильной остановки Bitcoin Core из-за сбоя электричества.Вот я и спросил об этих чудодейственных манипуляциях.Bitcoin Core не в изоляции работает и информацию хранит не в облаке, поэтому диски и операционная система имеют непосредственное отношение к проблемам в работе программы. Я перечислил возможные способы решения проблемы с застрявшей синхронизацией после отключения света, пользоваться ими или не пользоваться это уже дело десятое и зависит от хотелок конкретного пользователя. А насчет восстановления закоррапченых файлов, то никаких магических способов восстановления \"из ничего\" здесь не существует, только повторная синхронизация с предыдущего нормального файла или сначала. Можно разумеется попробовать разные утилиты для восстановления данных с диска, но вряд ли что-то хорошее может из этого выйти. Мы же тут пытаемся получить информацию о блокчейне децентрализованно, а эти утилиты могут левых данных туда запихнуть и сделать всю бд ненадежной.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "satscraper",
      "created_time": "August 29, 2023, 10:57:21 AM",
      "body": "Quote from: witcher_sense on August 28, 2023, 12:37:27 PM[Bitcoin Core не в изоляции работает и информацию хранит не в облаке, поэтому диски и операционная система имеют непосредственное отношение к проблемам в работе программы. Да, имеют. но предполагается что весь этот набор сохраняет свою работоспособность, а вот Bitcoin Core не работает.Quote from: witcher_sense on August 28, 2023, 12:37:27 PM Можно разумеется попробовать разные утилиты для восстановления данных с диска, но вряд ли что-то хорошее может из этого выйти. Мы же тут пытаемся получить информацию о блокчейне децентрализованно, а эти утилиты могут левых данных туда запихнуть и сделать всю бд ненадежной.Все известные мне утилиты служат для восстановления  снесённых, перезаписанных или отформатированных данных,  но эти данные должны быть изначально целостными.  Утилит получения целостных данных из атомарных данных , возникших в результате сбоя электричества, не существует.",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    },
    {
      "author": "The0ldl_lser",
      "created_time": "August 29, 2023, 11:20:09 AM",
      "body": "ТС, а что reindex не помогает? Это будет  гораздо  быстрее чем загружать (и проверять!) 500гб блокчейна с нуля. У меня на ссд почти двое суток ушло в первый раз. Если что-то попортилось, то \"в конце\" проверенного бч на диске. Насчет того, даст ли реиндекс частично догрузить порченый \"хвост\" не знаю",
      "score": 0,
      "upvotes": 0,
      "downvotes": 0
    }
  ]
}